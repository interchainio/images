# Tendermint Image

The [Packer](https://packer.io) script in this folder allows one to build a
simple Amazon Linux-based machine that runs a recent release of Tendermint,
along with Telegraf for monitoring.

## AMIs
Here is a list of the current AMIs available, built from this image:

* Interchain Tendermint v0.31.7-1560266257: `ami-01a43142f16749cd3`

All other information in this README only pertains to the latest version of this
image, unless otherwise specified.

## Usage
When launching an instance based on this AMI, you will need to configure the
following user data (which will be `source`d to convert each parameter to an
environment variable during startup):

```bash
TELEGRAF_COLLECTION_INTERVAL=10s
INFLUXDB_URL="http://influxdb-host:8086"
INFLUXDB_DATABASE=tendermint
INFLUXDB_USERNAME=tendermint
INFLUXDB_PASSWORD=somepassword
TENDERMINT_NODE_ID=node2
```

At present, this allows one to override the InfluxDB configuration for the
Telegraf instance that will run on this machine.

## Configuration
To override the Tendermint node's configuration, it is recommended that one use
the `tendermint testnet` command and Ansible to deploy the configuration
generated by `tendermint testnet`.

## Building
To build this image yourself, simply clone the repo and build it using Packer
(after configuring your local AWS credentials, of course):

```bash
packer build packer.json
```
