---

- name: create tendermint user
  user: name=tendermint

- name: Download tendermint binary
  get_url:
    url: https://github.com/tendermint/tendermint/releases/download/v0.31.5/tendermint_v0.31.5_linux_amd64.zip
    dest: /tmp/tendermint.zip
    checksum: sha256:1c865d28364b025b1849d9f9aab863bfbabd9bca4b58045b23ddf9a636409388

- name: Install tendermint binary
  unarchive:
    src: /tmp/tendermint.zip
    dest: /usr/bin
    remote_src: yes
    owner: root
    group: root
    mode: 0755

- name: Cleanup tendermint post-install
  file: path=/tmp/tendermint.zip state=absent

- name: Install tendermint service
  copy: src=tendermint.service dest=/etc/systemd/system/tendermint.service
  notify: reload systemd
